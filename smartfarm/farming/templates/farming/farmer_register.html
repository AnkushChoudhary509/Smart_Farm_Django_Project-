{% extends 'farming/base.html' %}
{% block title %}Register for SMS Alerts ‚Äî Smart Farming{% endblock %}
{% block extra_css %}
<style>
.reg-wrap{max-width:560px;margin:4rem auto;padding:0 1.5rem;}
.reg-card{background:white;border-radius:20px;padding:2.5rem;box-shadow:0 4px 24px rgba(0,0,0,.1);}
.reg-card h2{font-family:'Playfair Display',serif;color:#1a3a2a;margin-bottom:.5rem;}
.reg-card>p{color:#64748b;margin-bottom:2rem;font-size:.9rem;}
.fg{margin-bottom:1.2rem;}
label{display:block;font-size:.84rem;font-weight:600;color:#1a3a2a;margin-bottom:.4rem;}
input,select{width:100%;padding:11px 14px;border:1.5px solid #e2e8f0;border-radius:10px;font-size:.9rem;font-family:'DM Sans',sans-serif;background:#fafcfa;outline:none;transition:border .2s;}
input:focus,select:focus{border-color:#22c55e;background:white;}
.reg-btn{width:100%;padding:13px;background:linear-gradient(135deg,#1a3a2a,#2d6a4f);color:white;border:none;border-radius:12px;font-size:1rem;font-weight:700;cursor:pointer;margin-top:.5rem;}
.reg-btn:hover{opacity:.9;}
.success-box{background:#f0fdf4;border:1.5px solid #22c55e;border-radius:14px;padding:1.5rem;text-align:center;}
.success-box h3{color:#14532d;margin-bottom:.5rem;}
.success-box p{color:#166534;font-size:.9rem;}
.error-box{background:#fff1f2;border:1.5px solid #f43f5e;border-radius:10px;padding:.85rem 1.2rem;color:#be123c;font-size:.85rem;margin-bottom:1rem;}
</style>
{% endblock %}
{% block content %}
<div class="page-header"><h1>üì± Register for SMS Alerts</h1><p>Get crop advisories and alerts directly on your phone</p></div>
<div class="reg-wrap">
  <div class="reg-card">
    {% if success %}
    <div class="success-box">
      <div style="font-size:3rem">‚úÖ</div>
      <h3>Registration Successful!</h3>
      <p>You are now registered for SMS alerts. Our agricultural experts will send important crop advisories, weather warnings, and mandi price alerts directly to your mobile.</p>
      <a href="/" class="reg-btn" style="display:block;margin-top:1rem;text-decoration:none;text-align:center;">‚Üê Back to Home</a>
    </div>
    {% else %}
    <h2>üì≤ Register Your Farm</h2>
    <p>Fill in your details to receive free SMS alerts about crop threats, weather, and market prices.</p>
    {% if error %}<div class="error-box">‚ùå {{ error }}</div>{% endif %}
    <form method="POST">
      {% csrf_token %}
      <div class="fg"><label>Your Name *</label><input type="text" name="name" placeholder="e.g. Gurpreet Singh" required></div>
      <div class="fg"><label>Mobile Number *</label><input type="tel" name="phone" placeholder="10-digit mobile number" pattern="[0-9]{10}" required></div>
      <div class="fg">
        <label>State</label>
        <select name="state">
          <option value="">Select state</option>
          {% for s in states %}<option>{{ s }}</option>{% endfor %}
        </select>
      </div>
      <div class="fg"><label>Main Crop</label><input type="text" name="crop" placeholder="e.g. Wheat, Rice, Cotton"></div>
      <div class="fg"><label>Village / Town</label><input type="text" name="village" placeholder="Your village or town name"></div>
      <button type="submit" class="reg-btn">üì± Register for Free SMS Alerts</button>
      <p style="font-size:.75rem;color:#94a3b8;text-align:center;margin-top:.75rem;">Your details are kept private. Only used to send agricultural advisories.</p>
    </form>
    {% endif %}
  </div>
</div>
{% endblock %}
